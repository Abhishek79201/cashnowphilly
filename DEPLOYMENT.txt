DEPLOYMENT GUIDE - CASH NOW PHILLY
===================================

OPTION 1: VERCEL (RECOMMENDED)
-------------------------------
Vercel is optimized for Next.js and offers the easiest deployment.

1. Install Vercel CLI:
   npm i -g vercel

2. Login:
   vercel login

3. Deploy:
   vercel --prod

4. Configure Environment Variables:
   - Go to vercel.com > Your Project > Settings > Environment Variables
   - Add all variables from .env
   - Mark Production, Preview, and Development as needed

5. Custom Domain:
   - Settings > Domains
   - Add your domain (e.g., cashnowphilly.com)
   - Update DNS records as instructed

OPTION 2: NETLIFY
-----------------
1. Connect GitHub repository to Netlify

2. Build settings:
   - Build command: npm run build
   - Publish directory: .next

3. Environment Variables:
   - Site settings > Build & deploy > Environment
   - Add all variables from .env

4. Deploy

OPTION 3: DOCKER DEPLOYMENT
---------------------------
1. Create Dockerfile:
   FROM node:18-alpine
   WORKDIR /app
   COPY package*.json ./
   RUN npm ci --only=production
   COPY . .
   RUN npm run build
   EXPOSE 3000
   CMD ["npm", "start"]

2. Build image:
   docker build -t cashnow-philly .

3. Run container:
   docker run -p 3000:3000 --env-file .env cashnow-philly

OPTION 4: VPS (DigitalOcean, AWS, etc.)
----------------------------------------
1. SSH into server

2. Install Node.js 18+:
   curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
   sudo apt-get install -y nodejs

3. Clone repository:
   git clone <your-repo-url>
   cd cashnow-philly

4. Install dependencies:
   npm ci

5. Create .env file with production values

6. Build:
   npm run build

7. Install PM2:
   npm install -g pm2

8. Start with PM2:
   pm2 start npm --name "cashnow-philly" -- start
   pm2 save
   pm2 startup

9. Setup Nginx reverse proxy:
   server {
       listen 80;
       server_name cashnowphilly.com;
       
       location / {
           proxy_pass http://localhost:3000;
           proxy_http_version 1.1;
           proxy_set_header Upgrade $http_upgrade;
           proxy_set_header Connection 'upgrade';
           proxy_set_header Host $host;
           proxy_cache_bypass $http_upgrade;
       }
   }

10. SSL with Let's Encrypt:
    sudo apt-get install certbot python3-certbot-nginx
    sudo certbot --nginx -d cashnowphilly.com

POST-DEPLOYMENT CHECKLIST:
--------------------------
□ Form submission works and saves to Google Sheets
□ All images load correctly
□ Mobile responsive design works
□ Phone number link works on mobile
□ GTM and tracking pixels fire correctly
□ SSL certificate is active (HTTPS)
□ Custom domain points to site
□ 404 and error pages work
□ SEO meta tags are correct
□ Site loads in < 3 seconds
□ Test on multiple browsers
□ Submit sitemap to Google Search Console

MONITORING:
-----------
1. Set up uptime monitoring:
   - UptimeRobot (free)
   - Pingdom
   - StatusCake

2. Error tracking:
   - Sentry
   - LogRocket
   - Rollbar

3. Analytics:
   - Google Analytics (via GTM)
   - Google Search Console
   - Hotjar for user behavior

PERFORMANCE OPTIMIZATION:
-------------------------
1. Enable Vercel Analytics
2. Use Image Optimization (Next.js Image component - already implemented)
3. Enable Vercel Edge Functions for faster responses
4. Set up CDN for assets
5. Enable compression
6. Monitor Core Web Vitals

SECURITY:
---------
1. Keep dependencies updated: npm audit fix
2. Use environment variables for all secrets
3. Enable HTTPS only
4. Set up WAF (Web Application Firewall)
5. Regular backups of Google Sheets data
6. Monitor for suspicious form submissions

BACKUP STRATEGY:
----------------
1. Google Sheets: 
   - Automatic backup via Google Drive
   - Weekly export to CSV

2. Code:
   - Git repository (GitHub/GitLab)
   - Tag releases: git tag v1.0.0

3. Environment variables:
   - Store securely in password manager
   - Document in team wiki

UPDATES:
--------
1. Development:
   - Make changes in feature branch
   - Test locally: npm run dev
   - Build: npm run build
   - Commit and push

2. Staging:
   - Deploy to preview URL: vercel
   - Test thoroughly

3. Production:
   - Deploy: vercel --prod
   - Monitor for errors
   - Check Google Sheets for test submission

ROLLBACK:
---------
Vercel: 
   - Go to Deployments
   - Click "..." on previous deployment
   - Click "Promote to Production"

PM2:
   pm2 restart cashnow-philly
   (after git checkout to previous version)

SUPPORT CONTACTS:
-----------------
- Hosting: [Your hosting support]
- Domain: [Your domain registrar]
- Developer: [Your contact info]
- Google Workspace: [Admin contact]

